<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="/css.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div id="menu">
<a href="/index.html">Home</a> &nbsp; <a href="/CV.html">CV</a> &nbsp; <a href="/research.html">Research</a> &nbsp; <a href="/software.html">Software</a>
<hr>
</div>
<p>In this note I am going to write about how to tunnel via SSH, mount remote folders and access ipython notebook server running on a remote machine.</p>
<h2 id="ssh-tunnel-with-port-forwarding">SSH tunnel with port forwarding</h2>
<p>Often, I run computations on remote computers connecting via SSH.<br />
The problem is that I could not connect directly to private network, so I need to SSH first to a computer available through internet and after to a target computer inside internal network. This setup is very inconvenient, especially when you need to transfer files. Luckily, there is an easy solution that allows you to tunnel you data i.e. SSH port forwarding.<br />
<br />
My setup is<br />
<br />
HOME_computer ⟶  intermediate_HOST ⟶  target_HOST<br />
<br />
To setup forwarding open terminal and run:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="kw">ssh</span> -L 3000:target_HOST:22 login_at_intermediate_HOST@intermediate_HOST -N</code></pre></div>
<p>where<br />
<strong>-L</strong> stands for port forwarding from target_HOST:22 to localhost:3000 (HOME_computer),<br />
<strong>-N</strong> for not showing remote shell of login_at_intermediate_HOST@intermediate_HOST.<br />
You can put any available port instead of 3000.<br />
<br />
<strong>Let it run.</strong> <br />
<br />
To use the tunnel, open <strong>another</strong> terminal and type:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="kw">ssh</span> -p 3000 login_at_target_HOST@localhost</code></pre></div>
<hr />
<h2 id="mounting-remote-folders-with-sshfs">Mounting remote folders with SSHFS</h2>
<p>To mount remote folders, you could use <strong><a href="https://en.wikipedia.org/wiki/SSHFS">SSHFS</a></strong> (cross-platform, available for Windows, Linux and OS X).<br />
After installing SSHFS, you could mount target_HOST’s user home folder with</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="kw">sshfs</span> -p 3000 login_at_target_HOST@localhost: /tmp/ssh_mount</code></pre></div>
<p>I mounted it to the folder /tmp/ssh_mount, which I have created in advance with mkdir /tmp/ssh_mount.<br />
<br />
Alternatively, instead of home folder, you could use specified folder with:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="kw">sshfs</span> -p 3000 login_at_target_HOST@localhost:**Path/to/folder** /tmp/ssh_mount</code></pre></div>
<p>Note, you could now use file backup/synchronization software like <a href="https://rsync.samba.org/">rsync</a> and <a href="http://www.cis.upenn.edu/~bcpierce/unison/">unison</a>.<br />
<br />
————————————————————————</p>
<h2 id="accessing-remote-ipythonjupyter-notebook-via-ssh">Accessing remote ipython/jupyter notebook via SSH</h2>
<p>If you want to run and remotely access jupyter/ipython notebook on target_HOST, then, first, run it with</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="kw">ipython</span> notebook –no-browser –port=8888</code></pre></div>
<p>Second, to create another tunnel to access it, on your local machine run (<strong>your previously set up tunnel should be running</strong>):</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="kw">ssh</span> -L 9999:localhost:8888 -p 3000 localhost -N</code></pre></div>
<p><br />
Finally, in your browser, you open<br />
<strong><a href="http://localhost:9999" class="uri">http://localhost:9999</a></strong>,<br />
which shows remote notebook in your browser.<br />
<br />
<em>Written: 26/12/2014</em><br />
<em>Updated: 22/08/2015</em></p>
</body>
</html>
